const sql = require("mysql");

var connection;

/*function createDbConnection() {
	//console.log("Entered the function>");
	connection = sql.createConnection({
		host: "172.18.0.2",
  		user: "sep",
  		password: "RHFkwLSa62uXb7vQ",
		database: 'sep'
	});

	//console.log("Entered stage 2>");

	connection.connect(function(err) {
  		if (err) {
    			return console.error('error: ' + err.message);
  		}

  		console.log('Connected to the MySQL server.');
	});

}*/

module.exports.signUp = function (request) {
	connection = sql.createConnection({
		host: "172.18.0.2",
  		user: "sep",
  		password: "RHFkwLSa62uXb7vQ",
		database: 'sep'
	});

	//console.log("Entered stage 2>");

	connection.connect(function(err) {
  		if (err) {
    			return console.error('error: ' + err.message);
  		}

  		console.log('Connected to the MySQL server.');
	});


	//var query;
	//var values;

	console.log(request.email + request.firstName + request.age + request.password);

	//connection= createDbConnection();
	//query= `insert into user(email, first_name, age, password) values (?, ?, ?, ?)`;
	//values= [request.email, request.firstName, request.age, request.password];

	console.log('Prepping query...');
	connection.query("insert into user (email, first_name, age, password) values ('gehan@123', 'gehan', 25, 'abc')", (err, result)=>{
		if(err){
			console.log(err);

		}else{
			console.log("Record inserted with ID: " + result.insertID); 
		}
	});
	/*connection.query(query, values, (err, results, fields)=>{
		if(err){
			console.log("Error in writing to DB!");

		}else{
			console.log("Record inserted with ID: " + results.insertID); 
		}
	});*/
	connection.end();

};
