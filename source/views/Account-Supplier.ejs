<!doctype html>
<html class="no-js" lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Medi2Door - Bringing the medicine at your door</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/x-icon" href="assets/images/favicon.ico">

   
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/icon-font.min.css">
    <link rel="stylesheet" href="assets/css/plugins.css">
    <link rel="stylesheet" href="assets/css/helper.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <script src="assets/js/vendor/modernizr-3.7.1.min.js"></script>
</head>

<body>

    <div class="main-wrapper">

        <div class="header-section section">
            <div class="header-top header-top-one bg-theme-two">
                <div class="container-fluid">
                    <div class="row align-items-center justify-content-center">
                        <div class="col mt-10 mb-10 d-none d-md-flex">
                            <div class="header-top-left">
                                <p>Welcome to Medi2Door - Bringing the medicine at your door</p>
                            </div>
                        </div>
                        <div class="col mt-10 mb-10">
                            <div class="header-top-right">
                                <% if(userFName.length > 0) { %>
                                    <p>Hi <%= userFName %></p>                                        
                                    <% } %>
                                <p></a><a href="/logout-process">Logout</a></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="header-bottom header-bottom-one header-sticky">
                <div class="container-fluid">
                    <div class="row menu-center align-items-center justify-content-between">
                        <div class="col mt-15 mb-15">
                            <div class="header-logo">
                                <a href="/">
                                    <img src="assets/images/logo.png">
                                </a>
                            </div>
                        </div>

                        <div class="col order-3 order-lg-2">
                            <div class="main-menu">
                                <nav>
                                    <ul>
                                        <li>
                                            <a href="/about-us">ABOUT</a>
                                        </li>
                                        <li><a href="contact.html">CONTACT</a></li>
                                    </ul>
                                </nav>
                            </div>
                        </div>

                        <!-- Mobile Menu -->
                        <div class="mobile-menu order-12 d-block d-lg-none col"></div>

                    </div>
                </div>
            </div>

        </div>
        <div class="page-banner-section section" style="background-image: url(assets/images/page-cover.jpg)">
            <div class="container">
                <div class="row">
                    <div class="page-banner-content col">

                        <h1>My Account</h1>
                        <ul class="page-breadcrumb">
                            <li><a href="/index">Medi2Door</a></li>
                            <li><a href="/my-account-supplier">My Account</a></li>
                        </ul>

                    </div>
                </div>
            </div>
        </div>
        <!-- Page Section Start -->
        <div class="page-section section section-padding">
            <div class="container">
                <div class="row mbn-30">

                    <!-- My Account Tab Menu Start -->
                    <div class="col-lg-3 col-12 mb-30">
                        <div class="myaccount-tab-menu nav" role="tablist">
                            <a href="#account-info" class="active" data-toggle="tab"><i class="fa fa-user"></i> Account Details</a>
                            <a href="#orders" data-toggle="tab"><i class="fa fa-cart-arrow-down"></i> Orders</a>
                            <a href="#Inventory-Management" data-toggle="tab"><i class="fa fa-cubes"></i> Inventory</a>
                        </div>
                    </div>
                    <!-- My Account Tab Menu End -->
                    <!-- My Account Tab Content Start -->
                    <div class="col-lg-9 col-12 mb-30">
                        <div class="tab-content" id="myaccountContent">
                            <% if( valmessage == "" ) { %>
                                <% }  else if (valmessage == "fail" ) {%>
                                <div class="alert alert-danger alert-dismissible fade show" role="alert">
                                    Something went wrong!
                                    <button type="button" class="close" data-dismiss="alert" style="background-color: transparent;">
                                      <span aria-hidden="true">&times;</span>
                                    </button>
                                  </div>
                                  <br>
                                <% } else { %>
                                    <div class="alert alert-success alert-dismissible fade show" role="alert">
                                    Changes saved Successfully!
                                    <button type="button" class="close" data-dismiss="alert" style="background-color: transparent;">
                                      <span aria-hidden="true">&times;</span>
                                    </button>
                                  </div>
                                  <br>
                                <% }  %>
                            <!-- Single Tab Content Start -->
                            <div class="tab-pane fade show active" id="account-info" role="tabpanel">
                                <div class="myaccount-content">
                                    <h3>Account Details
                                        <button class="btn btn-dark btn-round" style=" margin-top: 1px;
                                        margin-right: 2px; float: right;  padding: auto 0 auto 200px;" onclick="enableEdit()">
                                        <i class="fa fa-pencil"></i> </button>
                                    </h3>
                                    <div class="account-details-form">

                                        <!--Form for updating account details
                    Get data from the get-session API and bind it to the form.
                    The form will be populated with existing user information and submitting the
                    form will lead to a batch update-->
                                        <form action="edit-supplier-process" method="post" enctype="multipart/form-data">
                                            <div class="row">
                                                <div class="col-lg-6 col-12 mb-30">
                                                    <input id="first-name" placeholder="First Name" type="text" name="firstName" value = "<%= userFName %>" disabled="True" required> 
                                                </div>

                                                <div class="col-lg-6 col-12 mb-30">
                                                    <input id="last-name" placeholder="Last Name" type="text" name="lastName" value = "<%= userLName %>" disabled="True"  required>
                                                </div>

                                                <div class="col-12 mb-30">
                                                    <input id="address" placeholder="Address" type="text" name="street" value = "<%= userAddress %>" disabled="True" required>
                                                </div>

                                                <div class="col-lg-6 col-12 mb-30">
                                                    <select id="city" name="city" disabled="True" required>
                                                        <option value = "<%= userCity %>"><%= userCity %></option>
                                                        <option value="null">Nearest City</option>
                                                        <option value="Kottawa">Kottawa</option>
                                                        <option value="Rajagiriya">Rajagiriya</option>
                                                        <option value="Nugegoda">Nugegoda</option>
                                                    </select>
                                                </div>

                                                <div class="col-lg-6 col-12 mb-15"><input type="email" placeholder="Email" id = "email" name = "email" value = "<%= userEmail %>" disabled="True" required readonly="true"></div>

                                                <div class="col-lg-6 col-12 mb-15"><input type="text" placeholder="NMRA ID" id = "nmraRegistration"  name="nmraRegistration" value = "<%= userNMRA %>" disabled="True" ></div>

                                                <div class="col-lg-6 col-12 mb-15"><input type="text" placeholder="Pharmacy ID"  id="pharmacistRegistration"  name="pharmacistRegistration" value = "<%= userPharmID %>" disabled="True" ></div>

                                                
                                                <div class="col-12 mb-30">
                                                    <hr/>
                                                    <input id="storeDescription" placeholder="Description" type="text" name="storeDescription" value = "<%= userStoreDesc %>" disabled="True" >
                                                </div>
                                                <div class="col-lg-6 col-12 mb-30">
                                                    <input type="file" id="storeImage" name="storeImage" disabled="True">
                                                </div>
                                                <div class="col-lg-6 col-12 mb-30 text-center">
                                                    <img class="w-50 border p-1" src="<%= userStoreImage %>" />
                                                </div>
                                                <div class="col-12 mb-30"> <hr /> <h4>Password change</h4></div>

                                                <div class="col-12 mb-30">
                                                    <input id="current-pwd" placeholder="Current Password" type="password" name="currentPassword"  style="-webkit-text-security: disc;" name="currentPassword" value = "<%= userPassword %>"  disabled="True" required>
                                                </div>

                                                <div class="col-lg-6 col-12 mb-30">
                                                    <input id="new-pwd" placeholder="New Password" type="password" name="password" disabled="True" onkeyup="check()">
                                                </div>

                                                <div class="col-lg-6 col-12 mb-30">
                                                    <input id="confirm-pwd" placeholder="Confirm Password" type="password" name="confirmPassword" disabled="True" onkeyup="check()">
                                                </div>
                                                
                                                <div><span id="message"></span></div>
                                                
                                                <div class="col-md-12 col-12">
                                                    <br>
                                                    <button class="btn btn-dark btn-round" type="submit" id="save-changes" disabled="True"><i class="fa fa-save"></i> Save Changes</button>
                                                </div>

                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>

                            <div class="tab-pane fade" id="orders" role="tabpanel">
                                <div class="myaccount-content">
                                    <h3>Orders</h3>
                                    <% if(orderList.length == 0) { %>
                                    <p>No orders to be listed</p>
                                    <% } else { %>
                                    <!--Order List-->
                                    <h4>Pending</h4>
                                    <div class="myaccount-table table-responsive text-center">
                                        <table class="table table-bordered" style="overflow-x:hidden;">
                                        <thead class="thead-light">
                                            <tr>
                                                <th>Order No</th>
                                                <th>Customer No</th>
                                                <th>Date</th>
                                                <th>Status</th>
                                                <th>Total</th>
                                                <th>Action</th>
                                            </tr>
                                        </thead>
                                        
                                        <tbody >
                                        <% for(var i=0; i < orderList.length; i++) { %>
                                            <% if(orderList[i].approval_status == 'pending' && orderList[i].prescription_needed == 'true') {%>
                                            <tr>
                                                <form action="/view-supplier-order-process" method="post">
                                                <td><%= orderList[i].order_id %></td>
                                                <td><%= orderList[i].customer_id %></td>
                                                <td style="white-space:pre-wrap"><%= orderList[i].date %></td>
                                                <td><%= orderList[i].approval_status %></td>
                                                <td>Rs. <%= orderList[i].total_price %></td>
                                                <td><button type="submit" class="btn btn-primary btn-sm" name="order_id"  id="order_id" value="<%= orderList[i].order_id %>">View</button></td>
                                                </form>
                                            </tr>
                                            <% } %> 
                                        <% } %> 
                                        </tbody>
                                    </table> 
                                    </div>
                                    <br> 

                                    <h4>Past Orders</h4>
                                    <div class="myaccount-table table-responsive text-center">
                                        <table class="table table-bordered" style="overflow-x:hidden;">
                                        <thead class="thead-light">
                                            <tr>
                                                <th>Order No</th>
                                                <th>Customer No</th>
                                                <th>Date</th>
                                                <th>Status</th>
                                                <th>Total</th>
                                                <th>Action</th>
                                            </tr>
                                        </thead>
                                        
                                        <tbody>
                                        <% for(var i=0; i < orderList.length; i++) { %>
                                            <% if(orderList[i].approval_status == 'approved' || orderList[i].approval_status == 'rejected') {%>
                                            <tr>
                                                <form action="/view-supplier-order-process" method="post"></form>
                                                <td><%= orderList[i].order_id %></td>
                                                <td><%= orderList[i].customer_id %></td>
                                                <td style="white-space:pre-wrap"><%= orderList[i].date %></td>
                                                <td><%= orderList[i].approval_status %></td>
                                                <td>Rs. <%= orderList[i].total_price %></td>
                                                <td><button type="submit" class="btn btn-primary btn-sm" name="order_id"  id="order_id" value="<%= orderList[i].order_id %>">View</button></td>
                                                </form>
                                            </tr>
                                            <% } %> 
                                        <% } %> 
                                        </tbody>
                                    </table> 
                                    </div>
                                    <br>
                                    
                                    <% } %>
                                </div>

                            </div>
                           
                            <div class="tab-pane fade" id="Inventory-Management" role="tabpanel">
                                <div class="myaccount-content">
                                    <h3>Inventory Management</h3>
                                    <div class="inventry-management-form">
                                        <table class="table table-bordered">
                                            <thead class="thead-light">
                                                <tr>
                                                    <th>Image</th>
                                                    <th>Item Name</th>
                                                    <th>Price</th>
                                                    <th>Category</th>
                                                    <th>Description</th>
                                                    <th>Action</th>
                                                </tr>
                                            </thead>

                                            <tbody>
                                                <% for(var i=0; i < itemList.length; i++) { %>
                                                <tr>
                                                    <td><img class="border p-1" width="60px;" src="<%= itemList[i].image %>" /></td>
                                                    <td><%= itemList[i].name %></td>
                                                    <td>Rs. <%= itemList[i].unit_price %></td>
                                                    <td><%= itemList[i].category %></td>
                                                    <td style="white-space:pre-wrap"><%= itemList[i].description %></td> 
                                                    <form action="/get-item-details" method="post">
                                                        <td><button type="submit" class="btn btn-primary btn-sm" id="item_code" name="item_code" value="<%= itemList[i].item_code %>">Edit</button></td>
                                                    </form>                                                                                                
                                                </tr>
                                                <% } %>
                                            </tbody>
                                        </table>
                                        <div class="row mbn-40">
                                            <div class="col-12 mb-40">
                                            <button type="button" class="btn btn-info btn-sm btn-block"><a href="/add-item-form">Add Item</a></button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- My Account Tab Content End -->

                </div>
            </div>
        </div><!-- Page Section End -->

        <div class="footer-top-section section bg-theme-two-light section-padding">
            <div class="container">
                <div class="row mbn-40">

                    <div class="footer-widget col-lg-4 col-md-6 col-12 mb-40">
                        <h4 class="title">CONTACT US</h4>
                        <p>No. 23A/1, Rukmal Place,<br />Sirimal Uyana, Rathmalana</p>
                        <p><a href="tel:0117544801">0112 123 456</a></p>
                        <p><a href="mailto:info@mdi2door.com">info@medi2door.com</a><a href="#">www.Medi2Door.com</a></p>
                    </div>

                    <div class="footer-widget col-lg-4 col-md-6 col-12 mb-40">
                        <h4 class="title">INFORMATION</h4>
                        <ul>
                            <li><a href="#">About us</a></li>
                            <li><a href="#">Contact us</a></li>
                            <li><a href="#">Terms & Conditions</a></li>
                            <li><a href="#">Privacy Policy</a></li>
                        </ul>
                    </div>

                    <div class="footer-widget col-lg-4 col-md-6 col-12 mb-40">
                        <h4 class="title">NEWSLETTER</h4>
                        <p>Subscribe our newsletter and get all update of our product</p>

                        <form id="mc-form" class="mc-form footer-subscribe-form" novalidate="true">
                            <input id="mc-email" autocomplete="off" placeholder="Enter your email here" name="EMAIL" type="email">
                            <button id="mc-submit"><i class="fa fa-paper-plane-o"></i></button>
                        </form>

                        <h5>FOLLOW US</h5>
                        <p class="footer-social"><a href="#">Facebook</a> - <a href="#">Twitter</a> - <a href="#">Google+</a></p>

                    </div>

                </div>
            </div>
        </div>
        <div class="footer-bottom-section section bg-theme-two pt-15 pb-15">
            <div class="container">
                <div class="row">
                    <div class="col text-center">
                        <p class="footer-copyright">Copyright &copy; Medi2Door. All rights reserved</p>
                    </div>
                </div>
            </div>
        </div>

    </div>

        <script src="assets/js/vendor/jquery-3.4.1.min.js"></script>
        <script src="assets/js/popper.min.js"></script>
        <script src="assets/js/bootstrap.min.js"></script>
        <script src="assets/js/plugins.js"></script>
        <script src="assets/js/ajax-mail.js"></script>
        <script src="assets/js/main.js"></script>
        <script>
            function enableEdit() {
              document.getElementById("first-name").disabled = false;
              document.getElementById("last-name").disabled = false;
              document.getElementById("address").disabled = false;
              document.getElementById("city").disabled = false;
              document.getElementById("last-name").disabled = false;
              document.getElementById("current-pwd").disabled = false;
              document.getElementById("email").disabled = false;
              document.getElementById("new-pwd").disabled = false;
              document.getElementById("confirm-pwd").disabled = false;
              document.getElementById("nmraRegistration").disabled = false;
              document.getElementById("pharmacistRegistration").disabled = false;
              document.getElementById("storeDescription").disabled = false;
              document.getElementById("storeImage").disabled = false;
              document.getElementById("save-changes").disabled = false;
            }

            var check = function() {
            if (document.getElementById('new-pwd').value.length<1 && document.getElementById('confirm-pwd').value.length<1) {
                document.getElementById("save-changes").disabled = false;

            } else if (document.getElementById('new-pwd').value == document.getElementById('confirm-pwd').value) {
                document.getElementById('message').style.color = 'green';
                document.getElementById('message').innerHTML = 'Passwords Match!';
                document.getElementById("save-changes").disabled = false;
            } else {
                document.getElementById('message').style.color = 'red';
                document.getElementById('message').innerHTML = 'Passwords do not match!';
                document.getElementById("save-changes").disabled = true;
            }
        }
        </script>
           
</body>
</html>